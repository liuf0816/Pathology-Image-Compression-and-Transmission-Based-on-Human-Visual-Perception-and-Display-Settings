<HTML>
<HEAD>
<TITLE> Kakadu Hyper-Doc (jpx_composition::get_instruction) </TITLE>
<STYLE TYPE="text/css">
<!--
.indented-text { padding-left: 20pt; }
.function-text { padding-left: 80pt;
                 text-indent: -60pt; }
-->
</STYLE>
</HEAD>
<BODY TEXT="#000000" LINK="#0000ff" BGCOLOR="#B4DCB4">
<P ALIGN="RIGHT">|<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="jpx$ition__get$ent_frame.html"> prev </A>||<A HREF="jpx$ition__get$inal_iset.html"> next </A>|</P>
<H1><A NAME="ToP">jpx_composition::get_instruction</A></H1>
<DIR><DIR><H3><EM><U>Java:</U> Jpx_composition.Get_instruction</EM></H3></DIR></DIR>
<DIR><DIR><H3><EM><U>C#:</U> Cjpx_composition.get_instruction</EM></H3></DIR></DIR>
<DIR><DIR><H3><EM><U>VB:</U> Cjpx_composition.get_instruction</EM></H3></DIR></DIR>
<P CLASS="function-text"><B>bool</B> get_instruction(
<B>jx_frame</B>&nbsp;*&nbsp;frame_ref,
<B>int</B>&nbsp;instruction_idx,
<B>int</B>&nbsp;&amp;&nbsp;layer_idx,
<B>int</B>&nbsp;&amp;&nbsp;increment,
<B>bool</B>&nbsp;&amp;&nbsp;is_reused,
<A HREF ="kdu_dims.html">kdu_dims</A>&nbsp;&amp;&nbsp;source_dims,
<A HREF ="kdu_dims.html">kdu_dims</A>&nbsp;&amp;&nbsp;target_dims)</P>
<DIR><DIR><P CLASS="function-text"><EM><U>Java:</U> public native boolean Get_instruction(
long&nbsp;frame_ref,
int&nbsp;instruction_idx,
int[]&nbsp;layer_idx,
int[]&nbsp;increment,
boolean[]&nbsp;is_reused,
Kdu_dims&nbsp;source_dims,
Kdu_dims&nbsp;target_dims)</EM></P></DIR></DIR>
<DIR><DIR><P CLASS="function-text"><EM><U>C#:</U> public bool get_instruction(
IntPtr,
int&nbsp;instruction_idx,
ref&nbsp;int&nbsp;layer_idx,
ref&nbsp;int&nbsp;increment,
ref&nbsp;bool&nbsp;is_reused,
Kdu_dims&nbsp;source_dims,
Kdu_dims&nbsp;target_dims)</EM></P></DIR></DIR>
<DIR><DIR><P CLASS="function-text"><EM><U>VB:</U> Public Function get_instruction(
ByVal&nbsp;As&nbsp;IntPtr,
ByVal&nbsp;instruction_idx&nbsp;As&nbsp;Integer,
ByRef&nbsp;layer_idx&nbsp;As&nbsp;Integer,
ByRef&nbsp;increment&nbsp;As&nbsp;Integer,
ByRef&nbsp;is_reused&nbsp;As&nbsp;Boolean,
ByVal&nbsp;source_dims&nbsp;As&nbsp;Kdu_dims,
ByVal&nbsp;target_dims&nbsp;As&nbsp;Kdu_dims) &nbsp;As&nbsp;Boolean</EM></P></DIR></DIR>
<P>[Declared in <A HREF="++++apps+c$essed_io+jpx+h.html">"../apps/compressed_io/jpx.h"</A>]</P><P><A HREF="jpx$ition.html">Go to class description.</A></P>

<P ALIGN="CENTER"><HR></P><H2><A NAME="SynopsiS">Synopsis</A></H2>
<DIV CLASS="indented-text">
<P>
The JPX composition box is built from a collection
of instructions which each either add to the composition
associated with the previous instruction or commence
from scratch with a new composition surface. Each instruction
also has its own timing. These aspects are untangled
here to create a set of distinct frames, each of which
has its own set of compositing layers.
</P><P>
 Each frame is composed by applying each of its compositing
layers in turn to an initially blank compositing surface.
Each compositing layer is applied to the region of
the compositing surface expressed by 
<A HREF="jpx$ition__get$struction.html#target_dims">target_dims</A>, where the location parameters in 
<A HREF="kdu_dims.html#pos">target_dims.pos</A> must be non-negative. This region is generated by
scaling (as required) the region of the source compositing
layer described by 
<A HREF="jpx$ition__get$struction.html#source_dims">source_dims</A>.
</P><P>
 Each instruction refers to exactly one compositing
layer. The index of this layer is returned via the
<A HREF="jpx$ition__get$struction.html#layer_idx">layer_idx</A> argument, but each time the frame is repeated (if
the 
<B>repeat_count</B> returned via 
<A HREF="jpx$ition__get$ext_frame.html">get_next_frame</A> is non-zero), the layer index must be augmented by
<A HREF="jpx$ition__get$struction.html#increment">increment</A> (might be 0).
</P>
</DIV>

<P ALIGN="CENTER"><HR></P><H2><A NAME="ReturnS">Return Value</A></H2><DIV CLASS="indented-text">
<P>
False if 
<A HREF="jpx$ition__get$struction.html#instruction_idx">instruction_idx</A> is greater than or equal to the 
<B>num_instructions</B> value returned via 
<A HREF="jpx$ition__get$rame_info.html">get_frame_info</A>.
</P>
</DIV>
<H2><A NAME="ArgS">Arguments</A></H2><DIV CLASS="indented-text">
<H4><A NAME="frame_ref">frame_ref</A> [<B>jx_frame</B>&nbsp;*]</H4><DIV CLASS="indented-text">
<P>
Opaque pointer obtained from calls to 
<A HREF="jpx$ition__get$ext_frame.html">get_next_frame</A>, 
<A HREF="jpx$ition__get$rev_frame.html">get_prev_frame</A> or 
<A HREF="jpx$ition__get$ent_frame.html">get_last_persistent_frame</A>.
</P>
</DIV>
<H4><A NAME="instruction_idx">instruction_idx</A> [<B>int</B>]</H4><DIV CLASS="indented-text">
<P>
0 retrieves the first instruction in the frame. Each
successive instruction is retrieved using consecutive
instruction indices, up to the L-1, where L is the
number of instructions returned by 
<A HREF="jpx$ition__get$ext_frame.html">get_next_frame</A>.
</P>
</DIV>
<H4><A NAME="layer_idx">layer_idx</A> [<B>int</B>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
<P>
Used to return the index of the compositing layer (starting
from 0 for the first one in the JPX data source) to
be used with this instruction.
</P>
</DIV>
<H4><A NAME="increment">increment</A> [<B>int</B>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
<P>
Amount to be added to 
<A HREF="jpx$ition__get$struction.html#layer_idx">layer_idx</A> each time the frame is repeated. We are not referring
here to global looping, as identified by the loop counter
returned by 
<A HREF="jpx$ition__get$obal_info.html">get_global_info</A>. We are referring only to repetitions of the frame,
as identified by the 
<B>repeat_count</B> value retrieved using 
<A HREF="jpx$ition__get$ext_frame.html">get_next_frame</A>.
</P>
</DIV>
<H4><A NAME="is_reused">is_reused</A> [<B>bool</B>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
<P>
Used to retrieve a boolean flag indicating whether
or not the compositing layer associated with this instruction
will be reused in any subsequent instruction in this
or any future frame. This can be useful for cache optimization.
</P>
</DIV>
<H4><A NAME="source_dims">source_dims</A> [<A HREF ="kdu_dims.html">kdu_dims</A>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
<P>
Region to be cropped from the source composition layer
to use in this instruction. The 
<A HREF="kdu_dims.html#pos">source_dims.pos</A> member identifies the location of the cropped region
relative to the upper left hand corner of the image
itself; its coordinates must be non-negative. All coordinates
are expressed on the compositing layer's registration
grid. For a description of the registration grid see
<A HREF="jpx$1ource__get$stration.html">jpx_layer_source::get_codestream_registration</A>.
</P><P>
 If 
<A HREF="jpx$ition__get$struction.html#source_dims">source_dims</A> has zero area, the source region is taken to be the
whole of the source compositing layer.
</P>
</DIV>
<H4><A NAME="target_dims">target_dims</A> [<A HREF ="kdu_dims.html">kdu_dims</A>&nbsp;&amp;]</H4><DIV CLASS="indented-text">
<P>
Region within the composition surface to which the
<A HREF="jpx$ition__get$struction.html#source_dims">source_dims</A> region of the compositing layer is to be mapped. This
may involve some scaling.
</P><P>
 If 
<A HREF="jpx$ition__get$struction.html#target_dims">target_dims</A> has zero area, the size of the target region is taken
to be identical to 
<A HREF="kdu_dims.html#size">source_dims.size</A>, unless 
<A HREF="jpx$ition__get$struction.html#source_dims">source_dims</A> also has zero area, in which case the size of the
target region is taken to be identical to the size
of the source compositing layer.
</P>
</DIV>
</DIV>

<P ALIGN="CENTER"><HR></P><P ALIGN="RIGHT">|<A HREF="#ToP"> top </A>||<A HREF="#SynopsiS"> synopsis </A>||<A HREF="#ReturnS"> return value </A>||<A HREF="#ArgS"> arguments </A>||<A HREF="jpx$ition__get$ent_frame.html"> prev </A>||<A HREF="jpx$ition__get$inal_iset.html"> next </A>|</P>
</BODY>
</HTML>
